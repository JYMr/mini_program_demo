<!--pages/cart.wxml-->
<import src="/pages/Common/TypeIcon.wxml" />
<view class='cart-title'>
    <text class="allselect{{isAllSelect ? ' on': ''}}" bindtap="AllSelect"><text class='icon'></text>全选</text>
    <text class='edit' wx:if="{{!editMode}}" bindtap="editMode">编辑</text>
    <text class='edit' wx:if="{{editMode}}" bindtap="editMode">完成</text>
</view>
<block wx:for="{{CartList}}" wx:key="{{index}}">
<view class='cart-item'>
    <view class='goods'>
        <text class='select{{item.isChoose == 1 ? " on":""}}' bindtap="HandleCheckBox" data-id="{{item.id}}"></text>
        <navigator hover-class='none' url="/pages/Goods/GoodsDetail/GoodsDetail?id={{item.id}}">
            <image class='pic' src='http://kzjimg01.b0.upaiyun.com/1508118546272.jpg'></image>
            <view class='name'><template is="TypeIcon" data="{{type: item.goods_type}}" />{{item.title}}</view>
            <!-- 此处不能回车 -->
            <text class='price'>￥<text class='n'>{{item.price}}</text></text>
            <text class='attr'>/1{{item.spec_type}}</text>
            <text class='ctype' wx:if="{{item.GroupStatus == '1'}}">疗程装</text>
        </navigator>
    </view>
    <view class='bottom'>
        <text class='tips'>{{item.GroupName}}</text>
        <view class='control'>
            <view class='mins' bindtap="bindMinus" hover-class="hover" data-id="{{item.id}}">-</view>
            <input type='number' class='nums' value="{{item.total}}" disabled></input>
            <view class='plus' hover-class="hover" bindtap="bindPlus" data-id="{{item.id}}">+</view>
        </view>
    </view>
</view>
</block>
<view class='floattotal'>
    <!-- 有UserInfo权限 -->
    <view class='buy-btn' wx:if="{{!editMode && hasUserInfo}}">去结算 ({{GoodsTotalNum}})</view>
    <!-- 无UserInfo权限 -->
    <button class='buy-btn' wx:if="{{!editMode && !hasUserInfo}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo">去结算 ({{GoodsTotalNum}})</button>

    <view class='buy-btn' wx:if="{{editMode}}" bindtap="DelCartList">删除 ({{GoodsTotalNum}})</view>
    <view class='info' wx:if="{{!editMode}}">
        <view>总计：<text class='price'>¥<text class='n'>{{GoodsTotalPrice}}</text></text></view>
        <text class='free'>{{ExpressText}}</text>
    </view>
    <text class="allselect{{isAllSelect ? ' on': ''}}" bindtap="AllSelect"><text class='icon'></text>全选</text>
</view>
<Dialog id="Dialog"></Dialog>